{"version":3,"sources":["Search.js","App.js","index.js","popcorn.png"],"names":["Search","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","query","results","final_result","view","final_string","trending","handleQueryChange","bind","assertThisInitialized","handleSubmit","handleClick","handleBack","e","preventDefault","setState","url","concat","fetchSubmitData","target","value","length","_this2","id","currentTarget","fetch","method","then","response","ok","Error","statusText","json","data","console","log","sum","number_of_episodes","episode_run_time","time","moment","duration","days","hours","days_string","hours_string","and_string","catch","error","_this3","temp","slice","_this4","_this5","html","push","react_default","a","createElement","onSubmit","className","type","onChange","autoComplete","placeholder","onClick","class","href","src","popcorn","alt","row_style","backgroundImage","backdrop_path","backgroundSize","backgroundColor","name","number_of_seasons","status","last_air_date","format","toLowerCase","style","map","result","key","poster_path","first_air_date","overview","fetchTrendingData","trending_show","React","Component","App","src_Search","ReactDOM","render","src_App","document","getElementById","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.ac91ed58.chunk.js","sourcesContent":["import React from 'react';\nimport moment from 'moment';\nimport popcorn from './popcorn.png';\n\nclass Search extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: '',\n      results: [],\n      final_result: {},\n      view: 'home',\n      final_string: '',\n      trending: []\n    };\n\n    this.handleQueryChange = this.handleQueryChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleBack = this.handleBack.bind(this);\n  }\n\n  handleSubmit(e) {\n    // handle a search submission\n    e.preventDefault();\n    this.setState({\n      view: 'results',\n    });\n    const url = `https://api.themoviedb.org/3/search/tv?page=1&language=en-US&api_key=5114cf314283a1d83f54f9684a701572&query=${this.state.query}`;\n    this.fetchSubmitData(url);\n  }\n\n  handleQueryChange(e) {\n    // handle a change in the search query\n    this.setState({ query: e.target.value });\n  }\n\n  handleBack(e) {\n    // handle a press of the back button\n    e.preventDefault();\n    if (this.state.results.length === 0) {\n      this.setState({\n        view: 'home'\n      });\n    }\n    else {\n      this.setState({\n        view: 'results'\n      });\n    }\n  }\n\n  handleClick(e) {\n    // handle clicking on a search result\n    e.preventDefault();\n    let id = e.currentTarget.value;\n    let url = `https://api.themoviedb.org/3/tv/${id}?language=en-US&api_key=5114cf314283a1d83f54f9684a701572`;\n    fetch(url, { method: 'GET' })\n      .then((response) => {\n        if (!response.ok) throw Error(response.statusText);\n        return response.json();\n      })\n      .then((data) => {\n        console.log(data);\n        let sum = data.number_of_episodes * data.episode_run_time[0];\n        let time = moment.duration(sum, \"minutes\");\n        // let total_hours = console.log(time.asHours());\n        let days = time.days();\n        let hours = time.hours();\n        let days_string = (days ? (days === 1 ? \"1 day\" : days + \" days\") : \"\");\n        let hours_string = (hours ? (hours === 1 ? \"1 hour\" : hours + \" hours\") : \"\");\n        let and_string = days_string && hours_string ? \" and \" : \"\";\n\n        this.setState({\n          view: 'final',\n          final_string: days_string + and_string + hours_string,\n          final_result: data,\n        });\n      })\n      .catch(error => console.log(error));\n  }\n\n  fetchSubmitData(url) {\n    // fetch data for search results\n    fetch(url, { method: 'GET' })\n      .then((response) => {\n        if (!response.ok) throw Error(response.statusText);\n        return response.json();\n      })\n      .then((data) => {\n        let temp = data.results;\n        temp = temp.slice(0, 5);\n        this.setState({\n          results: temp,\n        });\n        console.log(data);\n        console.log(this.state.results);\n      })\n      .catch(error => console.log(error));\n  }\n\n  fetchTrendingData() {\n    // fetch data for trending tv shows\n    let url = 'https://api.themoviedb.org/3/trending/tv/week?api_key=5114cf314283a1d83f54f9684a701572';\n    fetch(url, { method: 'GET' })\n      .then((response) => {\n        if (!response.ok) throw Error(response.statusText);\n        return response.json();\n      })\n      .then((data) => {\n        let temp = data.results;\n        temp = temp.slice(0, 5);\n        this.setState({\n          trending: temp,\n        });\n        console.log(this.state.trending);\n      })\n      .catch(error => console.log(error));\n  }\n\n  render() {\n    let html = [];\n\n    if (this.state.view === 'final') {\n      // show only the search bar with back button\n      html.push(\n        <form onSubmit={this.handleSubmit}>\n        <div className=\"box\">\n          <input className=\"search-bar two-icons\" type=\"text\" value={this.state.query}\n            onChange={this.handleQueryChange} autoComplete=\"off\" placeholder=\"type in a tv show\" />\n          <button type=\"submit\" className=\"submit search-button\"><i className=\"fas fa-search\"></i></button>\n          <button onClick={this.handleBack} className=\"submit back-button\"><i class=\"fas fa-arrow-left\"></i></button>\n        </div>\n      </form>\n      )\n    }\n    else {\n      // show logo and search bar without back button\n      html.push(\n        <div id=\"logo-title\">\n          <a href=\"/\"><h1>bingetime</h1></a>\n          <a href=\"/\"><img src={popcorn} alt=\"popcorn icon\"></img></a>\n        </div>\n      );\n      html.push(\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"box\">\n            <input className=\"search-bar one-icon\" type=\"text\" value={this.state.query}\n              onChange={this.handleQueryChange} autoComplete=\"off\" placeholder=\"type in a tv show\" />\n            <button type=\"submit\" className=\"submit\"><i className=\"fas fa-search\"></i></button>\n          </div>\n        </form>\n      );\n    }\n\n    if (this.state.view === 'final') {\n      // show final view with the show info and backdrop\n      const row_style = {\n        backgroundImage: `url(https://image.tmdb.org/t/p/original${this.state.final_result.backdrop_path})`,\n        backgroundSize: 'cover',\n        backgroundColor: 'rgba(0,0,0,0.5)'\n      };\n      html.push(\n        <div className=\"container\">\n          <div className=\"row final-result-row\">\n            <div className=\"col-12\">\n              <div className=\"final-wrapper\">\n                <div className=\"final-result\">\n                  {this.state.final_result.name}\n                </div>\n                <p className=\"final-result-info\">\n                  {this.state.final_result.number_of_seasons}\n                  {this.state.final_result.number_of_seasons === 1 ? \" season, \" : \" seasons, \"}\n                  {this.state.final_result.number_of_episodes}\n                  {this.state.final_result.number_of_episodes === 1 ? \" episode\" : \" episodes\"}\n                </p>\n                <p className=\"final-result-info\">\n                  {\n                    this.state.final_result.status === \"Ended\" ?\n                      `ended in ${moment(this.state.final_result.last_air_date, \"YYYY-MM-DD\").format(\"MMMM YYYY\")}` :\n                      `${this.state.final_result.status.toLowerCase()}`\n                  }\n                </p>\n                <p className=\"final-result-info\">takes {this.state.final_string} to watch</p>\n              </div>\n            </div>\n          </div>\n          <div id=\"output\"></div>\n        </div>\n      );\n      return (<div className=\"container-fluid\" style={row_style}>{html}</div>);\n    }\n    \n    if (this.state.view === 'results') {\n      // show search results\n      html.push(\n        <div className=\"results container\">\n          {this.state.results.map(result => (\n            <div className=\"row result-row\" key={result.id}>\n              <div className=\"col-xl-3 col-md-4 col-sm-12 result-col\">\n                <button onClick={this.handleClick} className=\"result\" value={result.id}>\n                  <img src={`https://image.tmdb.org/t/p/w154${result.poster_path}`} alt={result.name}></img>\n                </button>\n              </div>\n              <div className=\"d-none d-md-block col-xl-9 col-md-8\">\n                <button onClick={this.handleClick} className=\"result\" value={result.id}>\n                  {result.name}\n                </button>\n                <p className=\"result-aired\">first aired: {moment(result.first_air_date, \"YYYY-MM-DD\").format(\"MMMM YYYY\")}</p>\n                <p className=\"result-overview\">{result.overview}</p>\n              </div>\n            </div>\n          ))}\n        </div>\n      );\n    }\n\n    if (this.state.view === 'home') {\n      if (this.state.trending.length === 0) {\n        // fetch trending data if it hasn't been fetched yet\n        this.fetchTrendingData();\n      }\n      \n      // show trending tv shows\n      html.push(\n        <div className=\"trending\">\n          <div className=\"trending-title\">\n            <i class=\"fas fa-fire fa-2x\"></i><h2>trending</h2><i class=\"fas fa-fire fa-2x\"></i>\n          </div>\n          <div className=\"trending-shows\">\n            {this.state.trending.map(trending_show => (\n              <button onClick={this.handleClick} className=\"trending-show\" value={trending_show.id}>\n                {trending_show.name}\n              </button>\n            ))}\n          </div>\n        </div>\n      );\n    }\n\n    return (<div className=\"container-fluid\">{html}</div>);\n  }\n}\n\nexport default Search;","import React from 'react';\n\nimport Search from './Search';\nimport './App.css';\n\nfunction App() {\n  return (\n    <Search url=\"/\" />\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","module.exports = __webpack_public_path__ + \"static/media/popcorn.1e555263.png\";"],"sourceRoot":""}